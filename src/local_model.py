from datetime import datetime
import json
from typing import List, Dict, Any, Optional
from llama_cpp import Llama
import os
import psutil
import GPUtil
import time
from dateutil import parser
from src.config import MODEL_NAME
from src.prompt_manager import PromptManager

def get_timestamp():
    return datetime.now().strftime("%Y-%m-%d %H:%M:%S")

def check_system_info():
    info = []
    info.append(f"CPU –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: {psutil.cpu_percent()}%")
    try:
        gpus = GPUtil.getGPUs()
        for gpu in gpus:
            info.append(f"GPU {gpu.name}:")
            info.append(f"- –ó–∞–≥—Ä—É–∑–∫–∞ GPU: {gpu.load*100:.1f}%")
            info.append(f"- –ü–∞–º—è—Ç—å GPU: {gpu.memoryUsed}MB / {gpu.memoryTotal}MB")
    except:
        info.append("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ GPU")
    return "\n".join(info)


class LocalModel:
    def __init__(self):
        self.model = None
        self.loaded_path = None
        self.max_retries = 3
        self.retry_delay = 1  # seconds
        
        # Enhanced system prompts for better context
        self.system_prompts = {
            "event_parser": (
                "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É —Ç–µ–∫—Å—Ç–æ–≤ –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö. "
                "–¢–≤–æ—è –∑–∞–¥–∞—á–∞ - —Ç–æ—á–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –µ—ë –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON. "
                "–ü—Ä–∞–≤–∏–ª–∞:\n"
                "1. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–∞—Ç—ã\n"
                "2. –ï—Å–ª–∏ –¥–∞—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ —è–≤–Ω–æ - –≤–µ—Ä–Ω–∏ –æ—à–∏–±–∫—É DATE_NOT_FOUND\n"
                "3. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–µ–º—ã –≤—ã–±–∏—Ä–∞–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–æ—á–Ω–æ –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤\n"
                "4. –û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º, –Ω–æ –ª–∞–∫–æ–Ω–∏—á–Ω—ã–º\n"
                "5. –¶–µ–Ω—ã —É–∫–∞–∑—ã–≤–∞–π —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞–º–∏ –±–µ–∑ —Å–∏–º–≤–æ–ª–æ–≤ –≤–∞–ª—é—Ç\n"
                "6. –ê–¥—Ä–µ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–Ω—ã–º –∏ —Ç–æ—á–Ω—ã–º"
            )
        }

    def initialize_model(self, model_path: str):
        try:
            self.model = Llama(
                model_path=model_path,
                n_ctx=8192,
                n_gpu_layers=48,
                n_threads=os.cpu_count(),
                n_batch=1024,
                chat_format="chatml",
                verbose=False,
            )
            self.loaded_path = model_path
        except Exception as e:
            print(f"[{get_timestamp()}] üí• –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: {str(e)}")
            raise

    def _adjust_temperature(self, text: str) -> float:
        """–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç temperature –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞"""
        # –ë–æ–ª–µ–µ –Ω–∏–∑–∫–∞—è temperature –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∏ —á–µ—Ç–∫–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤
        if len(text) < 200:
            return 0.2
        # –°—Ä–µ–¥–Ω—è—è temperature –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤ —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω—ã
        elif len(text) < 500:
            return 0.3
        # –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è temperature –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –∏ —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
        return 0.4

    def _adjust_max_tokens(self, text: str) -> int:
        """–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç max_tokens –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞"""
        # –ë–∞–∑–æ–≤–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ: –ø—Ä–∏–º–µ—Ä–Ω–æ 2 —Ç–æ–∫–µ–Ω–∞ –Ω–∞ –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª —Ç–µ–∫—Å—Ç–∞
        base_tokens = len(text) * 2
        
        # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã
        min_tokens = 500
        # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        max_tokens = 2000
        
        # –û–∫—Ä—É–≥–ª—è–µ–º –¥–æ –±–ª–∏–∂–∞–π—à–µ–π —Å–æ—Ç–Ω–∏ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
        adjusted_tokens = round(base_tokens / 100) * 100
        
        # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö
        return max(min_tokens, min(adjusted_tokens, max_tokens))

    def _validate_response(self, response: Dict) -> Optional[Dict]:
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ –º–æ–¥–µ–ª–∏"""
        try:
            if "data" not in response:
                return None
                
            required_fields = [
                "eventTitle", "eventDescription", "eventDate",
                "eventPrice", "eventCategories", "eventThemes",
                "eventAgeLimit", "eventLocation", "linkSource"
            ]
            
            for field in required_fields:
                if field not in response["data"]:
                    return None

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –¥–∞—Ç—ã
            if "eventDate" in response["data"]:
                for date_entry in response["data"]["eventDate"]:
                    try:
                        # –ü–∞—Ä—Å–∏–º –¥–∞—Ç—ã –∏ —É–±–∏—Ä–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ timezone
                        from_date = parser.parse(date_entry["from"]).replace(tzinfo=None)
                        to_date = parser.parse(date_entry["to"]).replace(tzinfo=None)
                        # –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO
                        date_entry["from"] = from_date.isoformat()
                        date_entry["to"] = to_date.isoformat()
                    except Exception as e:
                        print(f"[{get_timestamp()}] –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞—Ç—ã: {str(e)}")
                        return None
                    
            return response
        except Exception as e:
            print(f"[{get_timestamp()}] –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: {str(e)}")
            return None

    def generate_structured_response(self, user_prompt: str, model_path: str) -> Dict[str, Any]:
        if not self.model or self.loaded_path != model_path:
            self.initialize_model(model_path)

        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–±–∏—Ä–∞–µ–º temperature –∏ max_tokens
        temperature = self._adjust_temperature(user_prompt)
        max_tokens = self._adjust_max_tokens(user_prompt)

        retries = 0
        last_error = None

        while retries < self.max_retries:
            try:
                response = self.model.create_chat_completion(
                    messages=[
                        {
                            "role": "system",
                            "content": self.system_prompts["event_parser"]
                        },
                        {
                            "role": "user",
                            "content": user_prompt
                        }
                    ],
                    response_format={
                        "type": "json_object",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "eventTitle": {"type": "string"},
                                        "eventDescription": {"type": "string"},
                                        "eventDate": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "from": {"type": "string"},
                                                    "to": {"type": "string"},
                                                },
                                                "required": ["from", "to"]
                                            }
                                        },
                                        "eventPrice": {
                                            "type": "array",
                                            "items": {"type": "number"}
                                        },
                                        "eventCategories": {
                                            "type": "array",
                                            "items": {
                                                "type": "string",
                                                "enum": [
                                                    "excursion", "exhibitions", "well", "lecture",
                                                    "seminar", "conference", "presentation", "webinar",
                                                    "training", "master_class", "vorkshop", "business_game",
                                                    "class", "forum", "mitap", "business_breakfast",
                                                    "meeting", "networking", "mastermind", "theater",
                                                    "movie", "stand__up", "concerts", "party",
                                                    "circus", "festivals", "show", "games",
                                                    "active_rest", "olympics", "battle", "championship",
                                                    "league", "competition", "volunteering", "charity",
                                                    "social_initiatives"
                                                ]
                                            },
                                            "minItems": 1
                                        },
                                        "eventThemes": {
                                            "type": "array",
                                            "items": {
                                                "type": "string",
                                                "enum": [
                                                    "culture_and_art", "science_and_education",
                                                    "industry_specialized", "it_and_the_internet",
                                                    "business_and_entrepreneurship",
                                                    "visual_creativity_visual_graphics",
                                                    "psychology_and_self__knowledge", "humor",
                                                    "music", "travel_and_tourism",
                                                    "cooking_and_gastronomy", "beauty_and_health",
                                                    "sport"
                                                ]
                                            },
                                            "minItems": 1
                                        },
                                        "eventAgeLimit": {"type": "string"},
                                        "eventLocation": {
                                            "type": "object",
                                            "properties": {
                                                "name": {"type": "string"},
                                                "address": {"type": "string"}
                                            },
                                            "required": ["name", "address"]
                                        },
                                        "linkSource": {"type": "string"}
                                    },
                                    "required": [
                                        "eventTitle", "eventDescription", "eventDate",
                                        "eventPrice", "eventCategories", "eventThemes",
                                        "eventAgeLimit", "eventLocation", "linkSource"
                                    ]
                                }
                            },
                            "required": ["data"]
                        }
                    },
                    temperature=temperature,
                    max_tokens=max_tokens
                )

                raw_text = response["choices"][0]["message"]["content"]
                
                # Clean markdown formatting if present
                if raw_text.startswith("```"):
                    raw_text = raw_text.split("\n", 1)[1]
                    raw_text = raw_text.rsplit("\n", 1)[0]
                
                try:
                    parsed = json.loads(raw_text)
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞
                    validated = self._validate_response(parsed)
                    if validated:
                        return validated
                    else:
                        raise ValueError("Invalid response structure")
                        
                except json.JSONDecodeError as e:
                    print(f"[ERROR] Failed to parse JSON: {str(e)}")
                    print(f"[ERROR] Raw text was: {raw_text}")
                    raise

            except Exception as e:
                last_error = e
                retries += 1
                if retries < self.max_retries:
                    print(f"[{get_timestamp()}] –ü–æ–ø—ã—Ç–∫–∞ {retries}/{self.max_retries}. –û—à–∏–±–∫–∞: {str(e)}")
                    time.sleep(self.retry_delay * retries)  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É —Å –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–æ–π
                continue
            
        print(f"[{get_timestamp()}] üí• –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã. –ü–æ—Å–ª–µ–¥–Ω—è—è –æ—à–∏–±–∫–∞: {str(last_error)}")
        raise last_error

textAds = "–ò–∑ –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥–∞ –æ—Ä–≥–∞–Ω–∏–∑—É—é—Ç —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –≤ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä–∫ ¬´–ö—É—Ä—à—Å–∫–∞—è –∫–æ—Å–∞¬ª. –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ—Å–µ—Ç—è—Ç –∫–ª—é—á–µ–≤—ã–µ –ª–æ–∫–∞—Ü–∏–∏ –∑–∞–ø–æ–≤–µ–¥–Ω–∏–∫–∞, —É—Å–ª—ã—à–∞—Ç, –∫–∞–∫ ¬´–ø–æ—ë—Ç¬ª –ø–µ—Å–æ–∫, –ø–æ–æ–±–µ–¥–∞—é—Ç –≤ —Ç—Ä–∞–∫—Ç–∏—Ä–µ, –∞ –≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–Ω—è –ø–æ—Å–µ—Ç—è—Ç —Å—ã—Ä–æ–≤–∞—Ä–Ω—é –∏ –ø—Ä–æ–≥—É–ª—è—é—Ç—Å—è –ø–æ –ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥—Å–∫—É. \n\nüëâ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —ç–∫—Å–∫—É—Ä—Å–∏—é (https://dvuhmetrovigid.ru/excursions/?did=0039&utm_source=part&utm_medium=0039&excursion=233)\n\n–¶–µ–Ω–∞ —Å –ø–ª–æ—Ç–Ω—ã–º –æ–±–µ–¥–æ–º 3900 ‚ÇΩ, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 8 —á–∞—Å–æ–≤.\n\n–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ê–ù–û–ù–°39 (https://t.me/+-cCRoVroPdZiMDYy)"
textEvent = "–ù–∞–∑–≤–∞–Ω–∏–µ: –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –Ø—à–Ω–∏–∫–æ–≤–∞ –≤ –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥–µ. –î–∞—Ç–∞: 27 –∏—é–ª—è (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ) 20:00 ‚Äì 22:30. –û–ø–∏—Å–∞–Ω–∏–µ: –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –Ø—à–Ω–∏–∫–æ–≤–∞ ‚Äì –¥–µ–≤—É—à–∫–∞ —Å –≥–∏—Ç–∞—Ä–æ–π –∏ –æ–≥—Ä–æ–º–Ω—ã–º–∏ –∞–º–±–∏—Ü–∏—è–º–∏. –ü–æ–Ω—è—Ç–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏ –±–ª–µ—Å—Ç—è—â–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –ø–æ–ø-—Ä–æ–∫–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –¥–µ–ª–∞—é—Ç –∫–∞–∂–¥—É—é –ø–µ—Å–Ω—é –ø—Ä–∏—Ç—è–≥–∞—Ç–µ–ª—å–Ω–æ–π.\n\n–û–Ω–∞ —Å–æ–∑–¥–∞–µ—Ç —Å–µ–±—è —Å–∞–º–∞ ‚Äî –∏ —É –Ω–µ–µ —ç—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è. –ú–∏–ª–ª–∏–æ–Ω—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –Ω–∞ YouTube, –∫–æ–Ω—Ü–µ—Ä—Ç—ã –ø–æ –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–µ, –º–æ—â–Ω—ã–µ –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏, –≤ —Ç–æ–º —á–∏—Å–ª–µ —Å –≥—Ä—É–ø–ø–æ–π Uma2rman, —Å—Ç–∞–≤—à–∏–µ –Ω–∞—Ä–æ–¥–Ω—ã–º–∏ –ø–µ—Å–Ω—è–º–∏ ‚Äî —ç—Ç–æ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –ø–æ–±–µ–¥ –∑–∞ –¥–µ–≤—è—Ç–∏–ª–µ—Ç–Ω—é—é –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞.\n\n–û–Ω–∞ –ø–æ–µ—Ç –Ω–∞ ¬´–ö–≤–∞—Ä—Ç–∏—Ä–Ω–∏–∫–µ —É –ú–∞—Ä–≥—É–ª–∏—Å–∞¬ª –∏ ¬´–î–∏–∫–æ–π –ú—è—Ç–µ¬ª, YLETA–ô –∏ STEREOLETO –∏ –æ–¥–∏–Ω –∑–∞ –¥—Ä—É–≥–∏–º –ø–æ–∫–æ—Ä—è–µ—Ç —Ä–æ–∫-—Ñ–µ—Å—Ç–∏–≤–∞–ª–∏ –∏ —Å–Ω–∏–º–∞–µ—Ç –∫–ª–∏–ø—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∏–≥—Ä—ã–≤–∞—é—Ç –Ω–∞–≥—Ä–∞–¥—ã –Ω–∞ –∫–æ–Ω–∫—É—Ä—Å–µ –∫–æ—Ä–æ—Ç–∫–æ–º–µ—Ç—Ä–∞–∂–µ–∫. –í –µ–µ –¥–∏—Å–∫–æ–≥—Ä–∞—Ñ–∏–∏ ‚Äì 5 EP, 7 –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö –∞–ª—å–±–æ–º–æ–≤ –∏ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–Ω–≥–ª–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º–Ω–æ–≥–æ –ª—é–±–≤–∏. –ü–æ—Ç–æ–º—É —á—Ç–æ –±–µ–∑ –ª—é–±–≤–∏ ‚Äî –∫ –º–∏—Ä—É –∏ —Å–ª—É—à–∞—Ç–µ–ª—é ‚Äî –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–≤–æ—Ä–∏—Ç—å, –∫–∞–∫ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –Ø—à–Ω–∏–∫–æ–≤–∞: —è—Ä–∫–æ, –∂–∏–≤–æ, –æ—Å—Ç—Ä–æ –∏ –ø—Ä–µ–¥–µ–ª—å–Ω–æ —á–µ—Å—Ç–Ω–æ, —Å–æ–∑–¥–∞–≤–∞—è –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Å–Ω–∏ ‚Äî —Ü–µ–ª—ã–µ –º–∏—Ä—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∫–∞–∂–¥—ã–π –Ω–∞—Ö–æ–¥–∏—Ç —Å–µ–±—è.\n\n–í–Ω–∏–º–∞–Ω–∏–µ: –Ω—É–º–µ—Ä–∞—Ü–∏—è –∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –º–µ—Å—Ç –∑–∞ —Å—Ç–æ–ª–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è —É—Å–ª–æ–≤–Ω—ã–º–∏, –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä —Å—Ç–æ–ª–∞. –¶–µ–Ω–∞: 1200. –ê–¥—Ä–µ—Å: —É–ª. –î–∑–µ—Ä–∂–∏–Ω—Å–∫–æ–≥–æ, 31–í, –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥. –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –∫–æ–Ω—Ü–µ—Ä—Ç"
textEvent2 = "–ù–∞–∑–≤–∞–Ω–∏–µ: ELECTRODVOR x –® presents. –î–∞—Ç–∞: 13 (–ø—è—Ç–Ω–∏—Ü–∞) 23:22 ‚Äì 14 (—Å—É–±–±–æ—Ç–∞) 06:00 –∏—é–Ω—è. –û–ø–∏—Å–∞–Ω–∏–µ: ELECTRODVOR x –® presents:\n\nUTOPIA: CHAPTER ONE\nsluts, zombies, vampires, dolls, plants\n\n –ª–æ–∫–∞—Ü–∏—è: electrodvor\n –¥–∞—Ç–∞: –ø—è—Ç–Ω–∏—Ü–∞, 13 –∏—é–Ω—è\n —Ö–æ—Å—Ç—ã: –®\n\n–≤ —ç—Ç—É –Ω–æ—á—å –≤—Å—ë —Å–∫—Ä—ã—Ç–æ–µ ‚Äî –≤—Å–ø–ª—ã–≤—ë—Ç.\n–≤—Å—ë –º—ë—Ä—Ç–≤–æ–µ ‚Äî –∑–∞–¥–≤–∏–≥–∞–µ—Ç—Å—è –≤ —Ä–∏—Ç–º–µ.\n–∞ –≤—Å–µ ¬´–Ω–µ —Ç–∞–∫–∏–µ¬ª ‚Äî —Å—Ç–∞–Ω—É—Ç —Å–æ–±–æ–π.\n\n–∑–æ–º–±–∏ —Ü–µ–ª—É—é—Ç—Å—è —Å —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏,\n–∫—É–∫–ª—ã —Ä–µ–∂—É—Ç –≤–æ–∑–¥—É—Ö,\nslutty tatty –≤–µ–¥—É—Ç –≤ —É—Ç–æ–ø–∏—é‚Ä¶\n–∏–ª–∏ –ø—Ä—è–º–æ –≤ –∞–¥. who knows?\n\n –ª–µ–∫—Ü–∏—è –æ–± –∏—Å—Ç–æ—Ä–∏–∏ —Ä–µ–π–≤–∞\n –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –æ–ø—ã—Ç –∏ –Ω–∞–ø–∏—Ç–∫–∏\n –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π —Å—Ç–æ–ª –æ—Ç –¥–µ–∫–∞–¥–µ–Ω—Ç–æ–≤ –∏ –¥–µ–∫–∞–¥–µ–Ω—Ç–æ–∫ –≥–æ—Ä–æ–¥–∫–∞ –ö:\nHard girls crew (Naya, YASYA, Xenia Raketa) Ah_Ulya, Selectica, daria ave_sna, przrk, dj voroffka, nrthwst, givemeyourtop & ownernaservere\n—Ç—Ä–∞–Ω—Å–ª–∏—Ä—É—é—Ç:\nHard style,\nArtist open mind selection,\nTropical bass,\nGothic rave\nDarkwave\nWitch House \nIndustrial / EBM  & live performances\n\n 13 –∏—é–Ω—è ‚Äî –Ω–æ—á—å, —á—Ç–æ–±—ã —Å–∏—è—Ç—å.\n–ø–æ–∫–∞–∂–∏ –º–∏—Ä—É —Å–≤–æ–π –∞—É—Ç—Ñ–∏—Ç –∏ –≤—ã–∏–≥—Ä–∞–π –ø—Ä–∏–∑.\n\n–≥–ª–∞–≤–∞ –ø–µ—Ä–≤–∞—è —Å–∫–æ—Ä–æ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è.\n–Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏ –ø–æ—Ä—Ç–∞–ª:\n–ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Å—è, —Å–ª–µ–¥–∏, –≤—Ö–æ–¥–∏.\n\n early bird ‚Äî –≤ –ø—Ä–æ–¥–∞–∂–µ\n\n#utopia_party #chapterone #slutszombiesvampires #undergroundmagic. –¶–µ–Ω–∞: 666. –ê–¥—Ä–µ—Å: –ö–∞—à—Ç–∞–Ω–æ–≤–∞—è –∞–ª–ª–µ—è 1 ¬´–∞¬ª, –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥. –ö–∞—Ç–µ–≥–æ—Ä–∏—è: —Ä–µ–π–≤"
textEvent3 = "–ù–∞–∑–≤–∞–Ω–∏–µ: –õ–µ–≥–µ–Ω–¥—ã –í–ò–ê 70-80-90—Ö ¬´–ú–´ –ò–ó –°–°–°–†¬ª. –Æ–±–∏–ª–µ–π–Ω—ã–π –∫–æ–Ω—Ü–µ—Ä—Ç. 10 –ª–µ—Ç –ø–æ—ë–º –¥–ª—è –≤–∞—Å. –î–∞—Ç–∞: 14 —Å–µ–Ω—Ç—è–±—Ä—è (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ) 15:00. –í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: 12. –¶–µ–Ω–∞: –æ—Ç 3000 –¥–æ 14500. –ê–¥—Ä–µ—Å: –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, –°–≤–µ—Ç–ª–æ–≥–æ—Ä—Å–∫, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 11. –û–ø–∏—Å–∞–Ω–∏–µ: 14 —Å–µ–Ω—Ç—è–±—Ä—è –≤ –°–≤–µ—Ç–ª–æ–≥–æ—Ä—Å–∫–µ –Ω–∞ –±–µ—Ä–µ–≥—É –ë–∞–ª—Ç–∏–π—Å–∫–æ–≥–æ –º–æ—Ä—è –ø—Ä–æ–π–¥–µ—Ç –±–æ–ª—å—à–æ–π —é–±–∏–ª–µ–π–Ω—ã–π –¥–µ—Å—è—Ç—ã–π –≥–∞–ª–∞-–∫–æ–Ω—Ü–µ—Ä—Ç ¬´–õ–µ–≥–µ–Ω–¥—ã –í–ò–ê 70-80-90—Ö ¬´–ú–´ –ò–ó –°–°–°–†¬ª.&nbsp;–í –ø—Ä–æ–≥—Ä–∞–º–º–µ –ø—Ä–æ–∑–≤—É—á–∞—Ç —Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ö–∏—Ç—ã 70-80-90—Ö.\n\n–ü–æ —Å–ª–æ–≤–∞–º –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö –∫—Ä–∏—Ç–∏–∫–æ–≤ –∫–æ–Ω—Ü–µ—Ä—Ç ¬´–ú–´ –°–°–°–†¬ª –≤—Ö–æ–¥–∏—Ç –≤ –¢–û–ü –ª—É—á—à–∏—Ö –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤ –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥–∞! –ò –ª—É—á—à–∏–µ –∏–∑ –ª—É—á—à–∏—Ö —Ä–∞–±–æ—Ç–∞—é—Ç —Å –Ω–∞–º–∏!\n\n–í –æ—Å–Ω–æ–≤–Ω–æ–º —Å–æ—Å—Ç–∞–≤–µ –∫–æ–Ω—Ü–µ—Ä—Ç–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç —É—á–∞—Å—Ç–∏–µ –∞—Ä—Ç–∏—Å—Ç—ã: –í–∞–ª–µ—Ä–∏–π –Ø—Ä—É—à–∏–Ω, –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–∫–∏–Ω–∏–Ω, –í–∞—Å–∏–ª–∏–π –ö—É—Ä—Å–∞–∫–æ–≤, –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –î–∏–∫—Å–æ–Ω, –°–µ—Ä–≥–µ–π –ë–æ–π–∫–æ, –ê–Ω–∞—Ç–æ–ª–∏–π –Ø—Ä–º–æ–ª–µ–Ω–∫–æ&nbsp;‚Äì —Å–æ–ª–∏—Å—Ç—ã, —ç–∫—Å-—Å–æ–ª–∏—Å—Ç—ã, –º—É–∑—ã–∫–∞–Ω—Ç—ã –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã—Ö –≤–æ–∫–∞–ª—å–Ω–æ-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –∞–Ω—Å–∞–º–±–ª–µ–π (–í–ò–ê):\n¬´–ê–†–ò–≠–õ–¨¬ª,\n¬´–õ–ï–ô–°–Ø, –ü–ï–°–ù–Ø¬ª\n¬´–ö–†–ê–°–ù–´–ï –ú–ê–ö–ò¬ª\n¬´–ì–û–õ–£–ë–´–ï –ì–ò–¢–ê–†–´¬ª\n¬´–ö–ê–†–ù–ê–í–ê–õ¬ª\n¬´–®–ï–°–¢–ï–†–û –ú–û–õ–û–î–´–•¬ª\n¬´–ë–ï–õ–´–ô –û–†–Å–õ¬ª\n¬´–°–Ø–ë–†–´¬ª\n¬´–ü–ï–°–ù–Ø–†–´¬ª\n\n¬´–í–ï–°–Å–õ–´–ï –†–ï–ë–Ø–¢–ê¬ª ‚Äì&nbsp;–ì–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã –õ–µ–æ–Ω–∏–¥ –ê–¥–æ–ª—å—Ñ–æ–≤–∏—á –ë–µ—Ä–≥–µ—Ä –ø—Ä–∏–µ–¥–µ—Ç –∫ –Ω–∞–º –Ω–∞ –∫–æ–Ω—Ü–µ—Ä—Ç –∏–∑ –ê–≤—Å—Ç—Ä–∞–ª–∏–∏, —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ –¥–ª—è –≥–æ—Ä–æ–¥–∞ –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥\n–Æ–†–ò–ô –õ–û–ó–ê (¬´–°–≤–∏—Ç—ã–π –∏–∑ –ø–µ—Å–µ–Ω –∏ —Å–ª–æ–≤‚Ä¶¬ª, ¬´–ü–ª–æ—Ç¬ª, ¬´–°—Ç–æ —á–∞—Å–æ–≤¬ª, ¬´–ü–æ–π, –º–æ—è –≥–∏—Ç–∞—Ä–∞, –ø–æ–π¬ª)\n–í–õ–ê–î–ò–ú–ò–† –ú–ê–†–ö–ò–ù (¬´–°–∏—Ä–µ–Ω–µ–≤—ã–π —Ç—É–º–∞–Ω¬ª, ¬´–Ø –≥–æ—Ç–æ–≤ —Ü–µ–ª–æ–≤–∞—Ç—å –ø–µ—Å–æ–∫¬ª, ¬´–ë–µ–ª–∞—è —á–µ—Ä–µ–º—É—Ö–∞¬ª, ¬´–ß—Ç–æ –∑–∞–∑–≤–æ–Ω—è—Ç –æ–ø—è—Ç—å –ö–æ–ª–æ–∫–æ–ª–∞ –∏ —Ç—ã –≤–æ–π–¥–µ—à—å –≤ —Ä–∞—Å–ø–∞—Ö–Ω—É—Ç—ã–µ –¥–≤–µ—Ä–∏¬ª)\n¬´–§–†–ò–°–¢–ê–ô–õ¬ª –°–ï–†–ì–ï–ô –î–£–ë–†–û–í–ò–ù (¬´–ê—Ö, –∫–∞–∫–∞—è –∂–µ–Ω—â–∏–Ω–∞!¬ª)\n–ú–ò–•–ê–ò–õ –î–û–õ–û–¢–û–í/–ê–ù–ê–¢–û–õ–ò–ô –ö–ê–®–ï–ü–ê–†–û–í (¬´–ë–µ–ª–æ–≤–µ–∂—Å–∫–∞—è –ø—É—â–∞¬ª, ¬´–ù–∞—à–∏ –ª—é–±–∏–º—ã–µ¬ª, ¬´–í–æ–ª–æ–≥–¥–∞¬ª, ¬´–ê–ª–µ—Å—è¬ª)\n–ê–õ–ï–ö–°–ê–ù–î–† –°–û–õ–û–î–£–•–ê (¬´–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π —á—É–∂–∞—è –º–∏–ª–∞—è, —Ç–∞ —á—Ç–æ –±—ã–ª–∞ –º–æ–µ–π¬ª)\n\n–í –ø—Ä–æ–≥—Ä–∞–º–º–µ –Ω–µ –∏—Å–∫–ª—é—á–µ–Ω—ã –∏ —Å—é—Ä–ø—Ä–∏–∑—ã, –≤–µ–¥—å –º–∞–ª–æ –ª–∏ –∫—Ç–æ –∑–∞–π–¥—ë—Ç –Ω–∞ –Ω–∞—à –æ–≥–æ–Ω—ë–∫!\n\n–û –∫–æ–Ω—Ü–µ—Ä—Ç–µ:\n–í–µ—Å—ë–ª—ã–µ –∑–∞–≤–æ–¥–Ω—ã–µ —Ä–µ–±—è—Ç–∞ —Å–æ–≤–µ—Ç—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –æ–≥–Ω—ë–º –≤ –≥–ª–∞–∑–∞—Ö –∂–¥—É—Ç –≤–∞—Å 14 —Å–µ–Ω—Ç—è–±—Ä—è –Ω–∞ —Å–∞–º–æ–π –∫—É–ª—å—Ç–æ–≤–æ–π –ø–ª–æ—â–∞–¥–∫–µ –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥–∞ –≤ ¬´–¢–µ–∞—Ç—Ä–µ —ç—Å—Ç—Ä–∞–¥—ã ¬´–Ø–Ω—Ç–∞—Ä—å –•–æ–ª–ª¬ª!\n\n–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –∫–æ–ª–ª–µ–∫—Ç–∏–≤ –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –≤ 2004 –≥–æ–¥—É. –ü–µ—Ä–≤—ã–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã –ø—Ä–æ—à–ª–∏ –≤ –ê–≤—Å—Ç—Ä–∞–ª–∏–∏ –≤ –≥–æ—Ä–æ–¥–∞—Ö –ú–µ–ª—å–±—É—Ä–Ω–µ –∏ –°–∏–¥–Ω–µ–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∏–∑–≤–µ–ª–∏ —Ñ—É—Ä–æ—Ä —Å—Ä–µ–¥–∏ –±—ã–≤—à–∏—Ö —ç–º–∏–≥—Ä–∞–Ω—Ç–æ–≤ –∏–∑ –°–°–°–†. –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –∫–æ–ª–ª–µ–∫—Ç–∏–≤ ¬´–õ–µ–≥–µ–Ω–¥—ã –í–ò–ê 70-80-90—Ö¬ª —É—Å–ø–µ—à–Ω–æ, —Å –∞–Ω—à–ª–∞–≥–∞–º–∏ –≥–∞—Å—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –ø–æ –Ω–µ–æ–±—ä—è—Ç–Ω—ã–º –ø—Ä–æ—Å—Ç–æ—Ä–∞–º –±—ã–≤—à–µ–≥–æ –°–°–°–† –∏ –∑–∞—Ä—É–±–µ–∂—å—è.\n\n50 –ª–µ—Ç –Ω–∞–∑–∞–¥ –≤—Å—è —Å—Ç—Ä–∞–Ω–∞ —Å–ª—É—à–∞–ª–∞ –í–æ–∫–∞–ª—å–Ω–æ-–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ê–Ω—Å–∞–º–±–ª–∏. –ò–º–µ–Ω–Ω–æ –æ–Ω–∏ –∏—Å–ø–æ–ª–Ω—è–ª–∏ –ø–µ—Å–Ω–∏, —Å—Ç–∞–≤—à–∏–µ —Ö–∏—Ç–∞–º–∏ –≤–Ω–µ –≤—Ä–µ–º–µ–Ω–∏, –≤–æ—à–µ–¥—à–∏–µ –≤ –∑–æ–ª–æ—Ç–æ–π —Ñ–æ–Ω–¥ –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –º—É–∑—ã–∫–∏:\n¬´–õ—é–¥–∏ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è¬ª, ¬´–ù–∞–ø–∏—à–∏ –º–Ω–µ –ø–∏—Å—å–º–æ¬ª, ¬´–í –∫—Ä–∞—é –º–∞–≥–Ω–æ–ª–∏–π, ¬´–ê–ª–µ—Å—è¬ª, ¬´–ë–µ–ª–æ–≤–µ–∂—Å–∫–∞—è –ø—É—â–∞¬ª, ¬´–õ—è–≥—É-–ø—Ä–∏–ª—è–≥—É¬ª, ¬´–ö–∞–∫ –ø—Ä–µ–∫—Ä–∞—Å–µ–Ω —ç—Ç–æ—Ç –º–∏—Ä¬ª, ¬´–õ–∏—à—å –ø–æ–∑–∞–≤—á–µ—Ä–∞ –Ω–∞—Å —Å—É–¥—å–±–∞ —Å–≤–µ–ª–∞¬ª, ¬´–î–ª—è –º–µ–Ω—è –Ω–µ—Ç —Ç–µ–±—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–µ–µ, ¬´–í–æ–ª–æ–≥–¥–∞¬ª, ¬´–ö–∞–∫ —É–ø–æ–∏—Ç–µ–ª—å–Ω—ã –≤ ‚Ä¶ –≤–µ—á–µ—Ä–∞¬ª, –ì–ª—É—Ö–∞—Ä–∏–Ω–∞—è –∑–æ—Ä, –í—ã —à—É–º–∏—Ç–µ, –±–µ—Ä–µ–∑—ã, \"–ì—É–ª—è—Ç—å —Ç–∞–∫ –≥—É–ª—è—Ç—å!\", ¬´–ê–ª–µ—à–∫–∏–Ω–∞ –ª—é–±–æ–≤—å¬ª, \"–ë–µ–ª–æ—Ä—É—Å—Å–∏—è\", ¬´–ö—Ç–æ —Ç–µ–±–µ —Å–∫–∞–∑–∞–ª?¬ª, ¬´–ê—Ö, –∫–∞–∫–∞—è –∂–µ–Ω—â–∏–Ω–∞¬ª, ¬´–¢–∞–º –≥–¥–µ –∫–ª—ë–Ω —à—É–º–∏—Ç¬ª, ¬´–ü–æ–≤–µ—Ä—å –≤ –º–µ—á—Ç—É¬ª, –ë—É—Ö–≥–∞–ª—Ç–µ—Ä, ¬´–ö–∞—Å–∫–∞–¥–µ—Ä—ã¬ª, ¬´–ê—ç—Ä–æ–ø–æ—Ä—Ç¬ª, ¬´–¢—Ä–∞–≤–∞ —É –¥–æ–º–∞¬ª, ¬´–ì–æ—Ä—å–∫–æ¬ª, ¬´–Ø –±—É–¥—É –¥–æ–ª–≥–æ –≥–Ω–∞—Ç—å –≤–µ–ª–æ—Å–∏–ø–µ–¥¬ª, ¬´–†–æ–∑–æ–≤—ã–µ —Ä–æ–∑—ã –°–≤–µ—Ç–∫–µ –°–æ–∫–æ–ª–æ–≤–æ–π¬ª, ¬´–¢—ã –º–Ω–µ –Ω–µ —Å–Ω–∏—à—å—Å—è¬ª, ¬´–ú–æ—è –ª—é–±–æ–≤—å –∂–∏–≤–∞¬ª, ¬´–¢–∞–∫ –≤–æ—Ç –∫–∞–∫–∞—è —Ç—ã¬ª, ¬´–ü–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ–ª—å–∑—è –±—ã—Ç—å –Ω–∞ —Å–≤–µ—Ç–µ –∫—Ä–∞—Å–∏–≤–æ–π —Ç–∞–∫–æ–π¬ª, ¬´–ë—Ä–æ–¥—è—á–∏–µ –∞—Ä—Ç–∏—Å—Ç—ã¬ª, ¬´–î–æ —á–µ–≥–æ –∂ —è –Ω–µ –≤–µ–∑—É—á–∏–π¬ª, ¬´–õ–∏—Å—Ç—å—è –∑–∞–∫—Ä—É–∂–∞—Ç¬ª, ¬´–°–ø–∞—Å–∞—Ç–µ–ª—å–Ω—ã–π –∫—Ä—É–≥¬ª, –ú–æ–π –∞–¥—Ä–µ—Å ‚Äì –°–æ–≤–µ—Ç—Å–∫–∏–π –°–æ—é–∑, –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ –ø–µ—Å–Ω–∏, –≤—ã–∑—ã–≤–∞—è —Ç–µ–ø–ª—ã–µ –Ω–æ—Å—Ç–∞–ª—å–≥–∏—á–µ—Å–∫–∏–µ —á—É–≤—Å—Ç–≤–∞ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–∞—à–µ–π —é–Ω–æ—Å—Ç–∏, –ø–µ—Ä–≤–æ–π –ª—é–±–≤–∏, –∏ –æ —Ç–æ–π –æ–≥—Ä–æ–º–Ω–æ–π —Å—Ç—Ä–∞–Ω–µ, –≥–¥–µ –≤—Å–µ –º—ã –±—ã–ª–∏ –µ–¥–∏–Ω—ã–º –Ω–∞—Ä–æ–¥–æ–º –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞ ‚Äì –°–°–°–†.\n\n–¢–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –∑–∞–∏–≥—Ä–∞—Ç—å&nbsp;¬´–õ—é–¥–∏ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è, –ª—é–¥–∏ –≤–ª—é–±–ª—è—é—Ç—Å—è –∂–µ–Ω—è—Ç—Å—è...¬ª, ¬´–ú–µ—á—Ç—ã —Å–±—ã–≤–∞—é—Ç—Å—è...¬ª, ¬´–Ø –≤—Å–ø–æ–º–∏–Ω–∞—é, —Ç–µ–±—è –≤—Å–ø–æ–º–∏–Ω–∞—é...¬ª, –∏ –∑–∞–ª —Å –ø–µ—Ä–≤–æ–π –∂–µ –Ω–æ—Ç—ã –ø–æ–µ—Ç –ø–µ—Å–Ω–∏ –≤ —É–Ω–∏—Å–æ–Ω.\n–í —ç—Ç–æ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Ä–µ—Ç—Ä–æ-—à–æ—É –ø—Ä–æ–∑–≤—É—á–∞—Ç –∏ —ç—Ç–∏ –ø–µ—Å–Ω–∏, –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ, –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ª—é–±–∏–º—ã–µ –ø—É–±–ª–∏–∫–æ–π. –ü—Ä–æ–∑–≤—É—á–∞—Ç –Ω–µ —Å ¬´—á—É–∂–æ–≥–æ –≥–æ–ª–æ—Å–∞¬ª, –∞ –≤ —Ç–æ–º –∂–µ —Å–∞–º–æ–º –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–æ–≥–¥–∞-—Ç–æ –∑–∞–ø–∞–ª–∏ –≤ —Å–µ—Ä–¥—Ü–µ –∫–∞–∂–¥–æ–≥–æ –∂–∏—Ç–µ–ª—è –Ω–µ–æ–±—ä—è—Ç–Ω–æ–≥–æ –°–°–°–†.\n\n–õ—é–¥–∏ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ—è–≤–ª—è–ª–∏ –±—É—Ä–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å –∫ –Ω–µ–æ–±—ã—á–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–∞–º.\n–ò –∫–æ–Ω—Ü–µ—Ä—Ç ¬´–ú–´ –ò–ó –°–°–°–†¬ª ‚Äì —ç—Ç–æ –≤–æ–ª–Ω—É—é—â–µ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ —Å–ª–∞–≤–Ω—ã–º –≤—Ä–µ–º–µ–Ω–∞–º —á–µ–π-—Ç–æ –º–æ–ª–æ–¥–æ—Å—Ç–∏! –ú—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –≤–∞–º –≤ —ç—Ç–æ—Ç –≤–µ—á–µ—Ä 100% —Ä–∞–¥–æ—Å—Ç–∏ –∏ –ø–æ–∑–∏—Ç–∏–≤–∞!!! –ë—É–¥–µ—Ç –æ—á–µ–Ω—å –¥—É—à–µ–≤–Ω–æ –∏ –≤–µ—Å–µ–ª–æ!\n\n–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–Ω—Ü–µ—Ä—Ç–∞ 1 —á–∞—Å 45 –º–∏–Ω –±–µ–∑ –∞–Ω—Ç—Ä–∞–∫—Ç–∞.\n\n*–í –°–û–°–¢–ê–í–ï –ê–†–¢–ò–°–¢–û–í –í–û–ó–ú–û–ñ–ù–´ –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ë–ï–ó –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–û–ì–û –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø!. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: –ö–æ–Ω—Ü–µ—Ä—Ç—ã"
if __name__ == "__main__":
    model = LocalModel()
    promptManager = PromptManager()
    
    text1 = promptManager.prepare_prompt(textEvent)
    text2 = promptManager.prepare_prompt(textAds)
    text3 = promptManager.prepare_prompt(textEvent2)
    text4 = promptManager.prepare_prompt(textEvent3)
    
    
    forPrint = [
        text4,text4,text4,
        text2,text2,text2,
        text1,text1,text1,
        text3,text3,text3,

        ]

    for i in forPrint:
        res = model.generate_structured_response(i, MODEL_NAME)
        print(json.dumps(res, ensure_ascii=False, indent=2))
    

